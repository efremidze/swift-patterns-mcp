# Benchmark Baselines

This directory stores MCP latency baselines generated by:

```bash
npm run bench:baseline
```

You can tune runs/output:

```bash
node scripts/benchmark-mcp.js --runs 10 --out docs/benchmarks/custom.json
```

The baseline benchmark runs five representative MCP scenarios:

1. list content sources
2. enable invalid source (error path)
3. search swift content
4. get swift pattern
5. search swift content with `requireCode=true`

Each JSON file includes:
- cold process latency (`cold`)
- warm process latency (`warm`)
- percentile metrics (`p50_ms`, `p90_ms`, `p99_ms`)
- success/failure counts and captured errors

Use these files as point-in-time references and compare new runs against the latest baseline for regressions.

## Concurrency Load Test

Run concurrent request validation (defaults to 10 parallel requests):

```bash
npm run test:load
```

You can tune thresholds and output path:

```bash
node scripts/load-test-mcp.js --concurrency 10 --max-p90 500 --min-success-rate 1 --out docs/benchmarks/load-latest.json
```

`test:load` fails when success rate drops below threshold or p90 latency exceeds the configured guardrail.
